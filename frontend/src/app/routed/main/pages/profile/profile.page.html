<nav class="uk-navbar-container uk-margin uk-box-shadow-medium" uk-navbar="mode: click">

  <div class="nav-overlay uk-navbar-left">
    <div class="uk-navbar-item uk-logo" routerLink="/">
      <img
        class="uk-preserve-width uk-margin-small-right"
        src="logo/logo_fill.svg" height="40" uk-svg>
      <img
        class="uk-preserve-width uk-animation-stroke"
        src="logo/logo_text.svg" height="25" uk-svg>
    </div>
  </div>

  <div class="nav-overlay uk-navbar-right">

    <ul class="uk-navbar-nav">
      <li class="uk-active">
        <a (click)="logout()">
          <span class="uk-visible@m">Выйти</span>
          <span uk-icon="sign-out"></span>
        </a>
      </li>
    </ul>


  </div>

</nav>


<div
  class="uk-flex uk-flex-center
    uk-child-width-1-4@l uk-child-width-1-3@m uk-child-width-1-2@s
    uk-grid-small uk-padding-small"
  uk-grid uk-height-match="target: > div > .uk-card"
>

  <div>
    <div class="uk-card uk-card-default uk-card-body uk-display-block">

      <div class="uk-inline uk-position-top-right uk-padding-small">
        <span uk-icon="pencil" uk-toggle="target: #edit-profile-panel"></span>
      </div>

      <div class="uk-margin-remove-top uk-margin-bottom">
        <img uk-toggle="target: #upload-new-image-panel" data-src="{{user.info.imageUrl}}" width="" height="" alt=""
             uk-img>
      </div>

      <div class="uk-text-left uk-text-lead uk-margin">
        <div class="uk-text-center uk-text-meta">Имя пользователя:</div>
        <div class="uk-text-left">{{user.info.name}}</div>
        <div class="uk-text-center uk-text-meta" *ngIf="user.card.content">Статус:</div>
        <div class="uk-text-left">{{user.card.content}}</div>
      </div>

    </div>
  </div>

  <div>

    <div class="uk-card uk-card-default uk-card-body">

      <div class="uk-card-title uk-margin">
        Теги:
      </div>

      <div>

        <span
          *ngFor="let teg of user.card.tags"
          class="uk-label uk-margin-small-right uk-margin-small-bottom"
        >
          {{teg}}
        </span>

      </div>

    </div>

  </div>


</div>


<div id="edit-profile-panel" uk-modal>
  <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
    <button class="uk-modal-close-default" type="button" uk-close></button>

    <div *ngIf="message" class="uk-text-center">
    <span class="uk-width-expand  uk-text-success" [ngClass]="{'uk-text-danger' : isError}">
      {{message}}
    </span>
    </div>


    <div class="">
      <label class="uk-form-label" for="name">Имя пользователя</label>

      <div class="uk-flex uk-flex-between">
        <div class="uk-form-controls uk-width-expand">
          <input class="uk-input" id="name" type="text" [(ngModel)]="newName" ngModel required min="4">
        </div>
        <button
          class="uk-button uk-button-primary"
          type="button"
          (click)="updateNickname()"
          [disabled]="!newName"
        >Изменить
        </button>
      </div>
    </div>

    <div class="uk-margin-small">
      <label class="uk-form-label" for="status">Статус</label>
      <div class="uk-flex uk-flex-between">
        <div class="uk-form-controls uk-width-expand">
          <input class="uk-input" id="status" type="text" [(ngModel)]="newStatus" required min="4" max="256">
        </div>
        <button
          class="uk-button uk-button-primary"
          type="button"
          (click)="updateStatus()"
          [disabled]="!newStatus"
        >Изменить
        </button>
      </div>
    </div>


    <div class="uk-margin-small">
      <label class="uk-form-label" for="old_password">Старый пароль</label>
      <div class="uk-flex uk-flex-between">
        <div class="uk-form-controls uk-width-expand">
          <input
            class="uk-input"
            id="old_password"
            type="password"
            [(ngModel)]="passwordForm.old_password"
          >
        </div>
      </div>
    </div>

    <div class="uk-margin-small">
      <label class="uk-form-label" for="new_password">Новый пароль</label>
      <div class="uk-flex uk-flex-between">
        <div class="uk-form-controls uk-width-expand">
          <input
            class="uk-input"
            id="new_password"
            type="password"
            [(ngModel)]="passwordForm.new_password"
          >
        </div>
      </div>
    </div>

    <div class="uk-margin-small">
      <label class="uk-form-label" for="new_password_again">Повторите новый пароль</label>
      <div class="uk-flex uk-flex-between">
        <div class="uk-form-controls uk-width-expand">
          <input
            class="uk-input"
            id="new_password_again"
            type="password"
            [(ngModel)]="passwordForm.new_password_again"
          >
        </div>
      </div>
    </div>

    <button
      class="uk-button uk-button-primary uk-width-expand"
      type="button"
      (click)="updatePassword()"
      [disabled]="isPasswordChangBtnDisable()"
    >Обновить пароль
    </button>


    <div *ngIf="isLoading" class="uk-overlay-default uk-position-cover">
      <div class="uk-position-center">
        <span uk-spinner="ratio: 5"></span>
      </div>
    </div>

  </div>
</div>


<div id="upload-new-image-panel" uk-modal>
  <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">

    <div class="uk-margin-small">
      <label class="uk-form-label" for="image">Фото профиля</label>
      <div
        uk-form-custom="target: true"
        class="uk-width-expand uk-form-controls uk-form-custom">
        <input
          type="file"
          id="image"
          name="image"
          ngModel
          required
          (change)="onImageSelected($event)"
        >
        <input
          class="uk-input"
          type="text"
          placeholder="Выберите файл"
          disabled=""
        >
      </div>
    </div>

    <div *ngIf="selectedImage" class="uk-flex uk-flex-center">
      <img class="uk-height-medium uk-width-medium" data-src="{{selectedImageURL}}" width="" height="" alt="" uk-img>
    </div>

    <div class="uk-flex uk-flex-between">
      <button
        class="uk-button uk-button-primary"
        type="button"
        (click)="uploadImage()"
        [disabled]="!selectedImage"
      >Загрузить
      </button>

      <button class="uk-button uk-button-default uk-modal-close" type="button">Закрыть</button>
    </div>


    <div *ngIf="isProgressBar" class="uk-overlay-default uk-position-cover">
      <div class="uk-position-center">
        <progress class="uk-progress" value="{{uploadProgress}}}" max="100"></progress>
      </div>
    </div>

  </div>
</div>

